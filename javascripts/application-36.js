// Copyright Â© DESIGNERBOARD.CO - designerboard.co

// Copyright (c) 2013 DESIGNERBOARD - designerboard.co

/*
 RequireJS text 0.27.0 Copyright (c) 2010-2011, The Dojo Foundation All Rights Reserved.
 Available via the MIT or new BSD license.
 see: http://github.com/jrburke/requirejs for details
*/

// Copyright DESIGNERBOARD.CO - designerboard.co

function doHighlight(e,t,n,r){if(!n||!r)n='<em class="hl">',r="</em>";var i="",s=-1,o=t.toLowerCase(),u=e.toLowerCase();while(e.length>0){s=u.indexOf(o,s+1);if(s<0)i+=e,e="";else if(e.lastIndexOf(">",s)>=e.lastIndexOf("<",s)){var a=u.lastIndexOf("/script>",s),f=u.lastIndexOf("<script",s);a>=f&&(i+=e.substring(0,s)+n+e.substr(s,t.length)+r,e=e.substr(s+t.length),u=e.toLowerCase(),s=-1)}}return i}function oiw(e,t,n){var r=screen.width?(screen.width-t)/2:100,i=screen.height?(screen.height-n)/2:100,s="width="+t+","+"height="+n+","+"top="+i+","+"left="+r+","+"location=no,"+"directories=no,"+"status=0,"+"menubar=no,"+"toolbar=no,"+"resizable=no";window.open(e,"",s)}define("app/routers/router",[],function(){var e=Backbone.Router.extend({after:function(e,t){},before:function(e,t){},initialize:function(){this.bind("route",this.trackPageview)},route:function(t,n,r){r||(r=this[n]);var i=_.bind(function(){if(this.before.apply(this,_.union([n],arguments))===!1)return;r&&r.apply(this,arguments),this.after.apply(this,_.union([n],arguments))},this);return e.__super__.route.call(this,t,n,i)},trackPageview:function(e,t){var n=Backbone.history.getFragment();!/^\//.test(n)&&n!=""&&(n="/"+n),typeof ga!="undefined"&&ga("send","pageview",n)}});return e}),define("app/collections/collection",[],function(){var e=Backbone.Collection.extend({_data:null,per_page:20,page:1,fetch:function(t){t=_.extend(t,{data:$.param(this._params())}),e.__super__.fetch.call(this,t)},initialize:function(t,n){_.defaults(this,n),e.__super__.initialize(t,n)},_params:function(){var e={page:this.page,per_page:this.per_page};return _.extend(e,this._data||{})}});return e}),define("app/models/model",[],function(){var e=Backbone.RelationalModel.extend({parse:function(e){var t=e.response||e;return t?t.parsed?t:this._parse(t):null},_parse:function(e){return{id:e.id,parsed:!0}}},{parse:function(e){return e&&!e.parsed?(new this)._parse(e):e}});return e}),define("app/models/behance_job",["app/models/model"],function(e){var t=e.extend({_parse:function(e){return console.log("BEHANCE JOB"),console.log(e),e=e.div.a,e instanceof Array&&(e=e[1]),{id:"behance-job-"+e.href.replace("/jobs/",""),company:e.span[0].strong.span.content,position:e.span[0].span.content,location:e.span[1].content,url:"http://dribbble.com"+e.href,startsWithVowel:this._parseStartstWithVowel(e),parsed:!0}},_parseStartstWithVowel:function(e){var t=e.span[0].span.content.toLowerCase(),n=t.slice(0,1);return _.contains(["a","e","i","o","u","h"],n)}});return t}),define("app/collections/behance_jobs",["app/collections/collection","app/models/behance_job"],function(e,t){var n=e.extend({model:t,parse:function(e){return e.query.results?e.query.results.li:[]},_query:function(e){return'SELECT * FROM html WHERE url="'+e+'" and xpath="//ul[@class=\'job-list\']/li"'},sync:function(e,t,n){var r=_.extend({type:"GET",url:"http://query.yahooapis.com/v1/public/yql?q="+this._query(t.url()),dataType:"jsonp",processData:!1},n);return $.ajax(r)},url:function(){return"http://www.behance.net/joblist"}});return n}),define("app/models/dn_job",["app/models/model"],function(e){var t=e.extend({_parse:function(e){return e=e.a,console.log(e),{id:"dn-job-"+e.href.replace(/\/|:|%|-|\./g,""),company:this._parseCompany(e),position:this._parsePosition(e),location:this._parseLocation(e),url:e.href,startsWithVowel:this._parseStartstWithVowel(e),index:this._parseIndex(e),parsed:!0}},_parseCompany:function(e){return e.span[0].match(/(.*?) is looking.*?/)[1]},_parseIndex:function(e){return this._parseCompany(e).toLowerCase()+this._parsePosition(e).toLowerCase()+this._parseLocation(e).toLowerCase()},_parseLocation:function(e){return e.span[1]},_parsePosition:function(e){return e.span[0].match(/is looking for an?\s(.*?)$/)[1]},_parseStartstWithVowel:function(e){var t=this._parsePosition(e).toLowerCase(),n=t.slice(0,1);return _.contains(["a","e","i","o","u","h"],n)}});return t}),define("app/collections/dn_jobs",["app/collections/collection","app/models/dn_job"],function(e,t){var n=e.extend({model:t,_params:function(){return _.extend({format:"json"},this._data||{})},parse:function(e){return e.query.results?e.query.results.li:[]},_query:function(e){return'SELECT * FROM html WHERE url="'+e+'" and xpath="//div[@class=\'InnerPage\']/ul/li"'},sync:function(e,t,n){var r=_.extend({type:"GET",url:"http://query.yahooapis.com/v1/public/yql?q="+this._query(t.url()),dataType:"jsonp",processData:!1},n);return $.ajax(r)},url:function(){return"https://news.layervault.com/jobs"}});return n}),define("app/models/dribbble_job",["app/models/model"],function(e){var t=e.extend({_parse:function(e){return e=e.div.a,e instanceof Array&&(e=e[1]),{id:"dribbble-job-"+e.href.replace("/jobs/",""),company:this._parseCompany(e),position:this._parsePosition(e),location:this._parseLocation(e),url:"http://dribbble.com"+e.href,startsWithVowel:this._parseStartstWithVowel(e),index:this._parseIndex(e),parsed:!0}},_parseCompany:function(e){return e.span[0].strong.span.content},_parseIndex:function(e){return this._parseCompany(e).toLowerCase()+this._parsePosition(e).toLowerCase()+this._parseLocation(e).toLowerCase()},_parseLocation:function(e){return e.span[1].content},_parsePosition:function(e){return e.span[0].span.content},_parseStartstWithVowel:function(e){var t=e.span[0].span.content.toLowerCase(),n=t.slice(0,1);return _.contains(["a","e","i","o","u","h"],n)}});return t}),define("app/collections/dribbble_jobs",["app/collections/collection","app/models/dribbble_job"],function(e,t){var n=e.extend({model:t,_params:function(){return _.extend({format:"json"},this._data||{})},parse:function(e){return e.query.results?e.query.results.li:[]},_query:function(e){return'SELECT * FROM html WHERE url="'+e+'" and xpath="//ol[@class=\'jobs\']/li"'},sync:function(e,t,n){var r=_.extend({type:"GET",url:"http://query.yahooapis.com/v1/public/yql?q="+this._query(t.url()),dataType:"jsonp",processData:!1},n);return $.ajax(r)},url:function(){return"http://dribbble.com/jobs"}});return n}),define("config/session",[],function(){var e={flagActive:!1,flagLargeImage:!0,section:null,viewHeader:null,cache:[],init:function(){this.setFlagLargeImage(!0)},setFlagLargeImage:function(e){this.flagLargeImage=e},setSection:function(e){$('[data-section="'+this.section+'"]').removeClass("active"),this.section=e,$toggle_size=$("header").find('[data-action="toggle_size"]'),e=="news"||e=="jobs"?$toggle_size.hide():$toggle_size.show(),$('[data-section="'+this.section+'"]').addClass("active")},setViewHeader:function(e){this.viewHeader=e}};return e}),function(){var e=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],t=/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,n=/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im,r=typeof location!="undefined"&&location.href,i=r&&location.protocol&&location.protocol.replace(/\:/,""),s=r&&location.hostname,o=r&&(location.port||void 0),u=[];define("text",[],function(){var a,f,l;return typeof window!="undefined"&&window.navigator&&window.document?f=function(e,t){var n=a.createXhr();n.open("GET",e,!0),n.onreadystatechange=function(){n.readyState===4&&t(n.responseText)},n.send(null)}:typeof process!="undefined"&&process.versions&&process.versions.node?(l=require.nodeRequire("fs"),f=function(e,t){t(l.readFileSync(e,"utf8"))}):typeof Packages!="undefined"&&(f=function(e,t){var n=new java.io.File(e),r=java.lang.System.getProperty("line.separator"),n=new java.io.BufferedReader(new java.io.InputStreamReader(new java.io.FileInputStream(n),"utf-8")),i,s,o="";try{i=new java.lang.StringBuffer,(s=n.readLine())&&s.length()&&s.charAt(0)===65279&&(s=s.substring(1));for(i.append(s);(s=n.readLine())!==null;)i.append(r),i.append(s);o=String(i.toString())}finally{n.close()}t(o)}),a={version:"0.27.0",strip:function(e){if(e){var e=e.replace(t,""),r=e.match(n);r&&(e=r[1])}else e="";return e},jsEscape:function(e){return e.replace(/(['\\])/g,"\\$1").replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r")},createXhr:function(){var t,n,r;if(typeof XMLHttpRequest!="undefined")return new XMLHttpRequest;for(n=0;n<3;n++){r=e[n];try{t=new ActiveXObject(r)}catch(i){}if(t){e=[r];break}}if(!t)throw Error("createXhr(): XMLHttpRequest not available");return t},get:f,parseName:function(e){var t=!1,n=e.indexOf("."),r=e.substring(0,n),e=e.substring(n+1,e.length),n=e.indexOf("!");return n!==-1&&(t=e.substring(n+1,e.length),t=t==="strip",e=e.substring(0,n)),{moduleName:r,ext:e,strip:t}},xdRegExp:/^((\w+)\:)?\/\/([^\/\\]+)/,useXhr:function(e,t,n,r){var i=a.xdRegExp.exec(e),s;return i?(e=i[2],i=i[3],i=i.split(":"),s=i[1],i=i[0],(!e||e===t)&&(!i||i===n)&&(!s&&!i||s===r)):!0},finishLoad:function(e,t,n,r,i){n=t?a.strip(n):n,i.isBuild&&i.inlineText&&(u[e]=n),r(n)},load:function(e,t,n,u){var f=a.parseName(e),l=f.moduleName+"."+f.ext,c=t.toUrl(l),h=u&&u.text&&u.text.useXhr||a.useXhr;!r||h(c,i,s,o)?a.get(c,function(t){a.finishLoad(e,f.strip,t,n,u)}):t([l],function(e){a.finishLoad(f.moduleName+"."+f.ext,f.strip,e,n,u)})},write:function(e,t,n){if(t in u){var r=a.jsEscape(u[t]);n.asModule(e+"!"+t,"define(function () { return '"+r+"';});\n")}},writeFile:function(e,t,n,r,i){var t=a.parseName(t),s=t.moduleName+"."+t.ext,o=n.toUrl(t.moduleName+"."+t.ext)+".js";a.load(s,n,function(){var t=function(e){return r(o,e)};t.asModule=function(e,t){return r.asModule(e,o,t)},a.write(e,s,t,i)},i)}}})}(),define("text!app/templates/base/view.html.mustache",[],function(){return'<!-- BaseViewTemplate - Since: 1.0.0 - Version: 1.0.0 -->\n<!-- Author: Fernando Tapia Rico -->\n\n<div id="{{view.id}}" class="{{resource}} {{path}} {{type}}">\n  <div class="view-content" data-present="view-content"></div>\n</div>'}),define("app/views/base/view",["config/session","text!app/templates/base/view.html.mustache"],function(e,t){var n=Backbone.View.extend({path:null,parentEl:null,resource:null,section:null,type:"view",flagActive:!1,flagFetch:!0,flagIgnoreSection:!1,flagRemoved:!1,collection:null,model:null,models:[],template:null,templateBase:t,templateLoad:null,afterInitialize:function(){},beforeInitialize:function(e){},bindExternalEvents:function(e){e=="on"&&Backbone.Events.trigger("close"),Backbone.Events[e]("close",this.close,this)},bindKeyEvents:function(e){},bindModelEvents:function(e){},bindNonViewEvents:function(e){e=e||"on",(this.model||this.collection)&&this.bindModelEvents(e),this.bindExternalEvents(e),this.bindKeyEvents(e=="on"?"bind":"unbind")},close:function(){this.exists()||this._close()},_close:function(){this.bindNonViewEvents("off"),this.remove(),this.unbind(),this.flagRemoved=!0,this.flagActive=!1},disableEvent:function(e){e&&(e.stopPropagation(),e.preventDefault())},events:function(){return{}},exists:function(){return $(this.$el.selector).length},fetch:function(){},find:function(e){return $(this.$el.selector).find(e)},initialize:function(e,t){this.beforeInitialize(e),_.bindAll(this),this.setElement("#"+this.cid,!1),e instanceof Backbone.Model&&(this.model=e),e instanceof Backbone.Collection&&(this.collection=e,this.models=e.models),this.reset(),this.render(),this.flagRemoved||(this.bindNonViewEvents("on"),this.afterInitialize())},params:function(){var t={path:this.path,resource:this.resource,session:e,type:this.type,view:{id:this.cid}};return t},render:function(e){return this.shouldRender?(this.renderBase(),(this.model||this.collection||this.models.length||this.flagStatic)&&this.renderContent(),this.flagFetch&&this.fetch(),this.setElement(this.$el.selector,!1)):this._close(),this},renderBase:function(){if(!this.exists()){var e=Mustache.render(this.templateBase,this.params());$(this.parentEl).append(e),this.setElement(this.$el.selector,!1)}},renderContent:function(){var e=Mustache.render(this.template,this.params());this.setElement(this.$el.selector,!0),this.find('[data-present="view-content"]').html(e)},reset:function(){this.parentEl&&$(this.parentEl).empty()},setModel:function(e){this.model&&this.bindModelEvents("off"),this.model=e,this.bindModelEvents("on")},shouldRender:function(){return this.flagIgnoreSection||this.section==e.section}});return n}),define("text!app/templates/base/list_view.html.mustache",[],function(){return'<!-- BaseListViewTemplate - Since: 1.0.0 - Version: 1.0.0 -->\n<!-- Author: Fernando Tapia Rico -->\n\n<div class="list-content clearfix" data-present="list-content"></div>'}),define("app/views/base/list_view",["app/views/base/view","text!app/templates/base/list_view.html.mustache"],function(e,t){var n=e.extend({paginateMargin:1e3,type:"list-view",template:t,bindExternalEvents:function(e){n.__super__.bindExternalEvents.call(this,e),$(window)[e]("resize",this.resizeHandler),$(window)[e]("scroll",this.scrollHandler)},bindModelEvents:function(e){this.collection&&this.collection[e]("reset",this.render,this)},fetchCallback:function(e,t){},fetchNext:function(){},renderContent:function(){this.flagActive=!1,this.renderList(),this.renderRows(),this.resizeHandler()},renderList:function(){if(!this.find('[data-present="list-content"]').length){var e=Mustache.render(this.template,this.params());this.find('[data-present="view-content"]').html(e),this.setElement(this.$el.selector,!1)}},renderRows:function(){var e=this.rowView();e&&_.each(this.models,function(t){new e(t)})},resizeHandler:function(e){this.scrollHandler()},rowView:function(){return null},scrollHandler:function(e){this.disableEvent(e);if(this.exists()){var t=$(window).scrollTop()+$(window).height();this.$el.outerHeight()-t<this.paginateMargin&&this.fetchNext()}}});return n}),define("app/views/application/base/list_view",["app/views/base/list_view"],function(e){var t=e.extend({parentEl:"#content",modelsBehance:[],modelsDN:[],modelsDribbble:[],flagBehanceFetched:!1,flagDNFetched:!1,flagDribbbleFetched:!1,paginateBehancePage:1,paginateBehanceLast:!1,paginateBehanceLastPage:38,paginateDNPage:1,paginateDNLast:!1,paginateDNLastPage:!1,paginateDribbblePage:1,paginateDribbbleLast:!1,paginateDribbbleLastPage:38,beforeInitialize:function(){this.models=[],this.modelsBehance=[],this.modelsDN=[],this.modelsDribbble=[],$("footer").hide(),$(window).scrollTop(0)},fetch:function(){$("#loading").addClass("active"),this.paginateBehanceLast||(this.flagBehanceFetched=!1,this.modelsBehance=[],this.fetchBehances()),this.paginateDNLast||(this.flagDNFetched=!1,this.modelsDN=[],this.fetchDNs()),this.paginateDribbbleLast||(this.flagDribbbleFetched=!1,this.modelsDribbble=[],this.fetchDribbbles())},fetchNext:function(){this.flagActive||(this.flagActive=!0,this.paginateBehancePage++,this.paginateDNPage++,this.paginateDribbblePage++,this.paginateBehancePage>this.paginateBehanceLastPage&&(this.paginateBehanceLast=!0),this.paginateDNPage>this.paginateDNLastPage&&(this.paginateDNLast=!0),this.paginateDribbblePage>this.paginateDribbbleLastPage&&(this.paginateDribbbleLast=!0),this.paginateBehanceLast&&this.paginateDNLast&&this.paginateDribbbleLast?$("footer").show():(this.trackPageview(this.paginateDribbblePage),this.fetch()))},fetchBehances:function(){},fetchBehancesCallback:function(e,t){this.flagBehanceFetched=!0,this.modelsBehance=e.models,this.fetchCallback(e,t)},fetchCallback:function(e,t){this.flagBehanceFetched&&this.flagDNFetched&&this.flagDribbbleFetched&&(this.flagActive=!1,this.models=this.mergeModels(),this.render(!0),this.setElement(this.$el.selector,!0),$("#loading").removeClass("active"))},fetchDNs:function(){},fetchDNsCallback:function(e,t){this.flagDNFetched=!0,this.modelsDN=e.models,this.fetchCallback(e,t)},fetchDribbbles:function(){},fetchDribbblesCallback:function(e,t){this.flagDribbbleFetched=!0,this.modelsDribbble=e.models,this.fetchCallback(e,t)},mergeModels:function(){return models=[],models=models.concat(this.modelsBehance).concat(this.modelsDN).concat(this.modelsDribbble),models},trackPageview:function(e){var t=Backbone.history.getFragment();!/^\//.test(t)&&t!=""&&(t="/"+t),t=t+"/page/"+e,typeof ga!="undefined"&&ga("send","pageview",t)}});return t}),define("app/views/base/row_view",["app/views/base/view"],function(e){var t=e.extend({type:"row-view",flagFetch:!1,events:function(){var e=t.__super__.events.call(this);return e.click=this.show,e},params:function(){var e=t.__super__.params.call(this);return e.model=this.model?this.model.attributes:{},e},reset:function(){},renderBase:function(){if(!this.exists()){var e="."+this.resource+"."+this.path,t=$(e+'[data-model-id="'+this.model.id+'"]');if(t.length)console.log("EXISTENT: "+this.model.id),this._close();else{var n=Mustache.render(this.templateBase,this.params());$(this.parentEl).find('[data-present="list-content"]').append(n),this.setElement(this.$el.selector,!1)}}},renderContent:function(){t.__super__.renderContent.call(this),this.model&&this.model.id&&this.$el.attr("data-model-id",this.model.id)},show:function(e){}});return t}),define("text!app/templates/jobs/index/row_view.html.mustache",[],function(){return'<!-- JobsIndexRowViewTemplate - Since: 1.0.0 - Version: 1.0.0 -->\n<!-- Author: Fernando Tapia Rico -->\n\n<a href="{{model.url}}" target="_blank" data-index="{{model.index}}">\n  <span class="company">{{model.company}}</span>\n  is hiring a{{#model.startsWithVowel}}n{{/model.startsWithVowel}}\n  <span class="position">{{model.position}}</span>\n  <span class="location">{{model.location}}</span>\n</div>'}),define("app/views/jobs/index/row_view",["app/views/base/row_view","text!app/templates/jobs/index/row_view.html.mustache"],function(e,t){var n=e.extend({parentEl:".jobs.index.list-view",path:"index",resource:"jobs",section:"jobs",template:t});return n}),define("text!app/templates/jobs/index/list_view.html.mustache",[],function(){return'<!-- JobsIndexListViewTemplate - Since: 1.0.0 - Version: 1.0.0 -->\n<!-- Author: Fernando Tapia Rico -->\n\n<div class="search">\n  <i class="icon-search"></i>\n  <input data-input="search" placeholder="Type to search">\n</div>\n\n<div class="list-content clearfix" data-present="list-content"></div>'}),define("app/views/jobs/index/list_view",["app/collections/behance_jobs","app/collections/dn_jobs","app/collections/dribbble_jobs","app/views/application/base/list_view","app/views/jobs/index/row_view","text!app/templates/jobs/index/list_view.html.mustache"],function(e,t,n,r,i,s){var o=r.extend({path:"index",resource:"jobs",section:"jobs",flagBehanceFetched:!0,template:s,paginateBehanceLast:!0,paginateDNLastPage:1,paginateDribbbleLastPage:1,blurSearch:function(e){this.disableEvent(e),console.log(this.find(".search i")),this.find(".search i").removeClass("active")},events:function(){var e=o.__super__.events.call(this);return e['focus [data-input="search"]']=this.focusSearch,e['blur  [data-input="search"]']=this.blurSearch,e['keyup [data-input="search"]']=this.search,e},fetchBehances:function(){var t={_path:"",_data:{page:this.paginateBehancePage,sort:"published_date",status:"current"}};this.flagFetch=!1,(new e(null,t)).fetch({success:this.fetchBehancesCallback})},fetchDNs:function(){var e={_path:""};this.flagFetch=!1,(new t(null,e)).fetch({success:this.fetchDNsCallback})},fetchDribbbles:function(){var e={_path:""};this.flagFetch=!1,(new n(null,e)).fetch({success:this.fetchDribbblesCallback})},focusSearch:function(e){this.disableEvent(e),this.find(".search i").addClass("active")},mergeModels:function(){models=[];while(this.modelsDN.length||this.modelsDribbble.length){var e=this.modelsDribbble.shift();e&&models.push(e),e=this.modelsDN.shift(),e&&models.push(e)}return models},rowView:function(){return i},search:function(e){var t=this.find('[data-input="search"]').val(),n=".row-view."+this.resource+"."+this.path;t!=""?(this.find(n+" .view-content > a").hide(),this.find(this.searchQuery(t)).show()):this.find(n+" .view-content > a").show()},searchQuery:function(e){var t=e.split(/,|\s|\.|;|:/);t=_.filter(t,function(e){return e&&e!=""});var n=_.map(t,function(e){return'[data-index*="'+e.toLowerCase()+'"]'});return n.join("")}});return o}),define("app/routers/jobs_router",["app/routers/router","app/views/jobs/index/list_view","config/session"],function(e,t,n){var r=e.extend({routes:{jobs:"jobsIndex"},jobsIndex:function(){n.setSection("jobs"),new t}});return r}),define("app/models/dn",["app/models/model"],function(e){var t=e.extend({_parse:function(e){return{id:"dn-"+e.a.content.replace(/\s/g,"").toLowerCase(),title:e.a.content,url:e.a.href,comment_url:this._parseCommentUrl(e),user_name:this._parseName(e),stats_likes:this._parseLikes(e),stats_comments:this._parseComments(e),stats_likes_plural:this._parseLikesPlural(e),stats_comments_plural:this._parseCommentsPlural(e),dn:!0,parsed:!0}},_parseComments:function(e){return parseInt(e.div.p.a[0].content.replace(/\scomments?/,""))},_parseCommentsPlural:function(e){var t=this._parseComments(e);return t!=1},_parseCommentUrl:function(e){return"http://news.layervault.com"+e.div.p.a[0].href},_parseLikes:function(e){return parseInt(e.div.span.content.replace(" points",""))},_parseLikesPlural:function(e){var t=this._parseLikes(e);return t!=1},_parseName:function(e){return e.div.p.a[1].content}});return t}),define("app/collections/dns",["app/collections/collection","app/models/dn"],function(e,t){var n=e.extend({model:t,_params:function(){var e=n.__super__._params.call(this);return _.extend({format:"json"},e)},parse:function(e){return e.query.results?e.query.results.li:[]},_query:function(e){return'SELECT * FROM html WHERE url="'+e+'" and xpath="//*[@class=\'InnerPage\']/ol/li"'},sync:function(e,t,n){var r=_.extend({type:"GET",url:"http://query.yahooapis.com/v1/public/yql?q="+this._query(t.url()),dataType:"jsonp",processData:!1},n);return $.ajax(r)},url:function(){return"http://news.layervault.com/"+this._path+"/"+this._page}});return n}),define("text!app/templates/news/index/row_view.html.mustache",[],function(){return'<!-- NewsIndexRowViewTemplate - Since: 1.0.0 - Version: 1.0.0 -->\n<!-- Author: Fernando Tapia Rico -->\n\n<a href="{{model.url}}" target="_blank" class="title" data-present="title">\n    {{model.title}}\n</a>\n<span class="name">\n    <span class="likes">\n        {{model.stats_likes}} point{{#model.stats_likes_plural}}s{{/model.stats_likes_plural}}\n    </span>\n    and\n    <a href="{{model.comment_url}}" target="_blank" class="comments">\n        {{model.stats_comments}} comment{{#model.stats_comments_plural}}s{{/model.stats_comments_plural}}\n    </a>\n    from\n    <span class="username">\n        {{model.user_name}}\n    </span>\n</span>\n'}),define("app/views/news/index/row_view",["app/views/base/row_view","text!app/templates/news/index/row_view.html.mustache"],function(e,t){var n=e.extend({parentEl:".news.index.list-view",path:"news",section:"news",template:t});return n}),define("app/views/news/index/list_view",["app/collections/dns","app/views/application/base/list_view","app/views/news/index/row_view"],function(e,t,n){var r=t.extend({path:"index",resource:"news",section:"news",flagBehanceFetched:!0,flagDNFetched:!1,flagDribbbleFetched:!0,paginateBehanceLast:!0,paginateDNLastPage:30,paginateDribbbleLast:!0,fetchDNs:function(){var t={_path:"p",_page:this.paginateDribbblePage};this.flagFetch=!1,(new e(null,t)).fetch({success:this.fetchDNsCallback})},rowView:function(){return n}});return r}),define("app/routers/news_router",["app/routers/router","app/views/news/index/list_view","config/session"],function(e,t,n){var r=e.extend({routes:{news:"newsIndex"},newsIndex:function(){console.log("NEWS"),n.setSection("news"),new t}});return r}),define("app/models/behance",["app/models/model"],function(e){var t=e.extend({_parse:function(e){return{id:"behance-"+e.id,title:e.name,url:e.url,short_url:e.short_url,large_image_url:e.covers[404],small_image_url:e.covers[404],user_name:e.owners[0].display_name,user_nickname:e.owners[0].username,user_picture:e.owners[0].images[138],stats_views:e.stats.views,stats_likes:e.stats.appreciations,stats_comments:e.stats.comments,date:e.created_on,score:this._parseScore(e),behance:!0,parsed:!0}},_parseScore:function(e){return e.stats.views+10*e.stats.appreciations}});return t}),define("app/collections/behances",["app/collections/collection","app/models/behance"],function(e,t){var n=e.extend({apiKey:"9Bk5yB4JJnhNIMbyRy6UlYCJ6AQSVk1Q",model:t,_params:function(){var e=n.__super__._params.call(this);return _.extend({api_key:this.apiKey},e)},parse:function(e){return e.projects},sync:function(e,t,n){var r=_.extend({type:"GET",dataType:"jsonp",url:t.url(),processData:!1},n);return $.ajax(r)},url:function(){return"http://www.behance.net/v2/"+this._path}});return n}),define("app/models/dribbble",["app/models/model"],function(e){var t=e.extend({_parse:function(e){return{id:"dribbble-"+e.id,title:e.title,url:e.url,short_url:e.short_url,large_image_url:e.image_url,small_image_url:e.image_teaser_url,user_name:e.player.name,user_nickname:e.player.username,user_picture:e.player.avatar_url,stats_views:e.views_count,stats_likes:e.likes_count,stats_comments:e.comments_count,date:moment(e.created_at).unix(),score:this._parseScore(e),dribbble:!0,parsed:!0}},_parseScore:function(e){return e.views_count+10*e.likes_count}});return t}),define("app/collections/dribbbles",["app/collections/collection","app/models/dribbble"],function(e,t){var n=e.extend({model:t,parse:function(e){return e.shots},sync:function(e,t,n){var r=_.extend({type:"GET",dataType:"jsonp",url:t.url(),processData:!1},n);return $.ajax(r)},url:function(){return"http://api.dribbble.com/"+this._path}});return n}),define("app/views/posts/base/list_view",["app/views/application/base/list_view"],function(e){var t=e.extend({resource:"posts",flagDNFetched:!0,paginateBehanceLastPage:30,paginateDNLast:!0,paginateDribbbleLastPage:30});return t}),define("text!app/templates/posts/base/row_view.html.mustache",[],function(){return'<!-- PostsBaseRowViewTemplate - Since: 1.0.0 - Version: 1.0.0 -->\n<!-- Author: Fernando Tapia Rico -->\n\n<div class="loader">\n  <span class="circle"></span>\n  <span class="circle"></span>\n  <span class="circle"></span>\n</div>\n\n{{#session.flagLargeImage}}\n    <a href="{{model.url}}" target="_blank" class="image large" data-present="link">\n        <img src="{{model.large_image_url}}" data-present="image">\n    </a>\n{{/session.flagLargeImage}}\n\n{{^session.flagLargeImage}}\n    <a href="{{model.url}}" target="_blank" class="image small" data-present="link">\n        <img src="{{model.small_image_url}}" rel="{{model.large_image_url}}" data-present="image">\n    </a>\n{{/session.flagLargeImage}}'}),define("app/views/posts/base/row_view",["app/views/base/row_view","text!app/templates/posts/base/row_view.html.mustache"],function(e,t){var n=e.extend({resource:"posts",template:t,bindExternalEvents:function(e){n.__super__.bindExternalEvents.call(this,e),Backbone.Events[e]("image-size",this.handleImageSize,this)},events:function(){return this.find('[data-present="image"]').load(this.handleLoadImage),n.__super__.events.call(this)},handleImageSize:function(){this.render(!0),this.setElement(this.$el.selector,!0)},handleLoadImage:function(){this.find('[data-present="link"]').addClass("active")}});return n}),define("app/views/posts/popular/row_view",["app/views/posts/base/row_view"],function(e){var t=e.extend({parentEl:".posts.popular.list-view",path:"popular",section:"popular"});return t}),define("app/views/posts/popular/list_view",["app/collections/behances","app/collections/dns","app/collections/dribbbles","app/views/posts/base/list_view","app/views/posts/popular/row_view"],function(e,t,n,r,i){var s=r.extend({path:"popular",section:"popular",fetchBehances:function(){var t={_path:"projects",_data:{sort:"featured_date",page:this.paginateBehancePage}};this.flagFetch=!1,(new e(null,t)).fetch({success:this.fetchBehancesCallback})},fetchDribbbles:function(){var e={_path:"shots/popular",_data:{page:this.paginateDribbblePage}};this.flagFetch=!1,(new n(null,e)).fetch({success:this.fetchDribbblesCallback})},mergeModels:function(){models=[];while(this.modelsBehance.length||this.modelsDribbble.length)modelDribbble=this.modelsDribbble.shift(),modelDribbble&&models.push(modelDribbble),modelBehance=this.modelsBehance.shift(),modelBehance&&models.push(modelBehance);return models},rowView:function(){return i}});return s}),define("app/views/posts/recent/row_view",["app/views/posts/base/row_view"],function(e){var t=e.extend({parentEl:".posts.recent.list-view",path:"recent",section:"recent"});return t}),define("app/views/posts/recent/list_view",["app/collections/behances","app/collections/dns","app/collections/dribbbles","app/views/posts/base/list_view","app/views/posts/recent/row_view"],function(e,t,n,r,i){var s=r.extend({path:"recent",section:"recent",fetchBehances:function(){var t={_path:"projects",_data:{sort:"published_date",page:this.paginateBehancePage}};this.flagFetch=!1,(new e(null,t)).fetch({success:this.fetchBehancesCallback})},fetchDribbbles:function(){var e={_path:"shots/everyone",_data:{page:this.paginateDribbblePage}};this.flagFetch=!1,(new n(null,e)).fetch({success:this.fetchDribbblesCallback})},mergeModels:function(){return models=[].concat(this.modelsBehance).concat(this.modelsDribbble),models=models.sort(function(e,t){return t.get("date")-e.get("date")}),models},rowView:function(){return i}});return s}),define("app/routers/posts_router",["app/routers/router","app/views/posts/popular/list_view","app/views/posts/recent/list_view","config/session"],function(e,t,n,r){var i=e.extend({routes:{recent:"postsRecent","(popular)":"postsPopular","*route":"postsPopular"},postsPopular:function(){r.setSection("popular"),new t},postsRecent:function(){r.setSection("recent"),new n}});return i}),define("app/routers/application_router",["app/routers/jobs_router","app/routers/news_router","app/routers/posts_router"],function(e,t,n){var r={init:function(){new n,new e,new t,Backbone.history.start({pushState:!1})}};return r}),define("app/views/application/header/view",["config/session"],function(e){var t=Backbone.View.extend({el:"header",events:function(){return{'click [data-action="share_facebook"]':this.shareFacebook,'click [data-action="share_twitter"]':this.shareTwitter,'click [data-action="show_recent"]':this.showRecent,'click [data-action="show_jobs"]':this.showJobs,'click [data-action="show_news"]':this.showNews,'click [data-action="show_popular"]':this.showPopular,'click [data-action="toggle_size"]':this.toggleSize,'mouseover [data-present="logo"]':this.getRandomLogoColor}},getRandomLogoColor:function(){var e=$("header").find('[data-present="logo"]'),t=["blue","green","yellow","purple","red"],n=t[Math.round(Math.random()*4)]||"green";while(e.is("."+n))n=t[Math.round(Math.random()*4)]||"green";e.attr("class","logo"),e.addClass(n)},setResizeIcon:function(){var t=$("header").find('[data-action="toggle_size"] i');e.flagLargeImage?t.removeClass("icon-sign-blank").addClass("icon-th"):t.removeClass("icon-th").addClass("icon-sign-blank")},shareFacebook:function(){var e="http://www.facebook.com/sharer/sharer.php?u=http://designerboard.co/&t=Designerboard - Behance, Dribbble and DesignerNews, all in one";oiw(e,661,338)},shareTwitter:function(){var e="https://twitter.com/intent/tweet?original_referer=http://designerboard.co/&text=Designerboard - Behance, Dribbble and DesignerNews, all in one&tw_p=tweetbutton&url=http://designerboard.co";oiw(e,695,300)},showRecent:function(){$("header").find('[data-action="toggle_size"]').show(),Backbone.history.navigate("recent",!0)},showJobs:function(){$("header").find('[data-action="toggle_size"]').hide(),Backbone.history.navigate("jobs",!0)},showNews:function(){$("header").find('[data-action="toggle_size"]').hide(),Backbone.history.navigate("news",!0)},showPopular:function(){$("header").find('[data-action="toggle_size"]').show(),Backbone.history.navigate("popular",!0)},toggleSize:function(){e.setFlagLargeImage(!e.flagLargeImage),this.setResizeIcon(),Backbone.Events.trigger("image-size"),$("html").outerHeight()<$(window).scrollTop()&&$(window).scrollTop($(document).height())}});return t}),function(){var e,t=function(){},n=["assert","clear","count","debug","dir","dirxml","error","exception","group","groupCollapsed","groupEnd","info","log","markTimeline","profile","profileEnd","table","time","timeEnd","timeStamp","trace","warn"],r=n.length,i=window.console=window.console||{};while(r--)e=n[r],i[e]||(i[e]=t)}(),jQuery.fn.setCursorToTextEnd=function(){var e=this.val();this.val(""),this.val(e)},Array.prototype.joinWithLast=function(e,t){return this.length>1?this.slice(0,-1).join(e+" ")+" "+t+" "+this.slice(-1):_.first(this)},String.prototype.escapeHtml=function(){var e={"<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};return this.replace(/[<>"']/g,function(t){return e[t]})},String.prototype.newLineHtml=function(){return this.replace(/\r?\n/g,function(e){return"<br/>"})},String.prototype.equalTo=function(e){return this.toLowerCase()===e.toLowerCase()},String.prototype.capitalize=function(){return this.charAt(0).toUpperCase()+this.slice(1)},String.prototype.startsWith=function(e){return this.indexOf(e)==0},String.prototype.highlightTerms=function(e,t,n,r){var i=this,s=t?[e]:e.split(" ");for(var o=0;o<s.length;o++)s[o]!=""&&(i=doHighlight(i,s[o],n,r));return i},String.prototype.lineCount=function(){var e=this.split(/\r\n|\r|\n/);return e[e.length-1]==""&&e.pop(),e.length},String.prototype.lineOf=function(e){var t=this.split(/\r?\n/g);for(var n=0;n<t.length;n++)if(t[n].indexOf(e)>=0)return n;return-1},String.prototype.lineSlice=function(e,t){t||(t=0);var n=this.split(/\r?\n/g),r=[];for(var i=t;i<n.length&&e>r.length;i++)r.push(n[i]);while(!r[r.length-1]||r[r.length-1]=="")r.pop();return r.join("\n")},String.prototype.linkify=function(){var e,t,n,r,i='target="_blank" rel="nofollow"';return t=/(\b(https?|ftp):\/\/[-A-Z0-9+&@#\/%?=~_|!:,.;]*[-A-Z0-9+&@#\/%=~_|])/gim,httpReplace='<a href="$1" '+i+">$1</a>",e=this.replace(t,httpReplace),n=/(^|[^\/])(www\.[\S]+(\b|$))/gim,wwwReplace='$1<a href="http://$2" '+i+">$2</a>",e=e.replace(n,wwwReplace),r=/(\w+@[a-zA-Z_]+?\.[a-zA-Z]{2,6})/gim,emailReplace='<a href="mailto:$1">$1</a>',e=e.replace(r,emailReplace),e},String.prototype.checksum=function(){var e,t=305419896;for(e=0;e<this.length;e++)t+=this.charCodeAt(e)*e;return t},Date.prototype.timestamp=function(){return this.getTime()/1e3},define("lib/core_ext/utils.js",function(){}),require.config({paths:{text:"lib/plugins/text"}}),require(["app/routers/application_router","app/views/application/header/view","config/session","lib/core_ext/utils.js"],function(e,t,n){var r=new t;n.init(),n.setViewHeader(r),e.init(),n.viewHeader.setResizeIcon()}),define("main",function(){});